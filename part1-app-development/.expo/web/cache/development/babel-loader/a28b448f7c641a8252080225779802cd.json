{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { UserAction, UserKey } from \"./constants\";\n\nvar loadAccessToken = function loadAccessToken() {\n  return _regeneratorRuntime.async(function loadAccessToken$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem(UserKey.ACCESS_TOKEN));\n\n        case 3:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 6:\n          _context.prev = 6;\n          _context.t0 = _context[\"catch\"](0);\n\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 6]], Promise);\n};\n\nvar userInitialState = {\n  accessToken: loadAccessToken()\n};\nexport var userReducer = function userReducer() {\n  var prevState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : userInitialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case UserAction.SET_USER:\n      return _objectSpread(_objectSpread({}, prevState), action.payload);\n\n    case UserAction.LOGIN:\n      AsyncStorage.setItem(UserKey.ACCESS_TOKEN, action.payload.accessToken);\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        accessToken: action.payload.accessToken\n      });\n\n    case UserAction.LOGOUT:\n      window.localStorage.removeItem(UserKey.ACCESS_TOKEN);\n      return {\n        accessToken: undefined\n      };\n\n    default:\n      return prevState;\n  }\n};","map":{"version":3,"sources":["/Users/hidang/Desktop/momo-interview-project/src/store/user/reducers.js"],"names":["AsyncStorage","UserAction","UserKey","loadAccessToken","getItem","ACCESS_TOKEN","userInitialState","accessToken","userReducer","prevState","action","type","SET_USER","payload","LOGIN","setItem","LOGOUT","window","localStorage","removeItem","undefined"],"mappings":";;;;;;;AAAA,OAAOA,YAAP,MAAyB,2CAAzB;AACA,SAASC,UAAT,EAAqBC,OAArB;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAEPH,YAAY,CAACI,OAAb,CAAqBF,OAAO,CAACG,YAA7B,CAFO;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;;AAQA,IAAMC,gBAAgB,GAAG;AACvBC,EAAAA,WAAW,EAAEJ,eAAe;AADL,CAAzB;AAIA,OAAO,IAAMK,WAAW,GAAG,SAAdA,WAAc,GAA0C;AAAA,MAAzCC,SAAyC,uEAA7BH,gBAA6B;AAAA,MAAXI,MAAW;;AACnE,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKV,UAAU,CAACW,QAAhB;AACE,6CAAYH,SAAZ,GAA0BC,MAAM,CAACG,OAAjC;;AACF,SAAKZ,UAAU,CAACa,KAAhB;AACEd,MAAAA,YAAY,CAACe,OAAb,CAAqBb,OAAO,CAACG,YAA7B,EAA2CK,MAAM,CAACG,OAAP,CAAeN,WAA1D;AACA,6CACKE,SADL;AAEEF,QAAAA,WAAW,EAAEG,MAAM,CAACG,OAAP,CAAeN;AAF9B;;AAIF,SAAKN,UAAU,CAACe,MAAhB;AACEC,MAAAA,MAAM,CAACC,YAAP,CAAoBC,UAApB,CAA+BjB,OAAO,CAACG,YAAvC;AACA,aAAO;AACLE,QAAAA,WAAW,EAAEa;AADR,OAAP;;AAGF;AACE,aAAOX,SAAP;AAfJ;AAiBD,CAlBM","sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { UserAction, UserKey } from \"./constants\";\n\nconst loadAccessToken = async () => {\n  try {\n    return await AsyncStorage.getItem(UserKey.ACCESS_TOKEN);\n  } catch (e) {\n    // error reading value\n  }\n};\n\nconst userInitialState = {\n  accessToken: loadAccessToken(),\n};\n\nexport const userReducer = (prevState = userInitialState, action) => {\n  switch (action.type) {\n    case UserAction.SET_USER:\n      return { ...prevState, ...action.payload };\n    case UserAction.LOGIN:\n      AsyncStorage.setItem(UserKey.ACCESS_TOKEN, action.payload.accessToken);\n      return {\n        ...prevState,\n        accessToken: action.payload.accessToken,\n      };\n    case UserAction.LOGOUT:\n      window.localStorage.removeItem(UserKey.ACCESS_TOKEN);\n      return {\n        accessToken: undefined,\n      };\n    default:\n      return prevState;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}